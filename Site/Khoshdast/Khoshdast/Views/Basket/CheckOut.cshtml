@model ViewModels.CheckOutViewModel
@{
    ViewBag.Title = "پرداخت سفارش";
    Layout = "~/Views/Shared/FrontEnd/_FronEndLayout.cshtml";
}

<div class="breadcrumb_section bg_gray page-title-mini">
	<div class="container">
	 
		<div class="row align-items-center">
			<div class="col-md-6">
				<div class="page-title">
					<h1>پرداخت سفارش</h1>
				</div>
			</div>
			<div class="col-md-6">
				<ol class="breadcrumb justify-content-md-end">
					<li class="breadcrumb-item"><a href="#">صفحه اصلی</a></li>
					<li class="breadcrumb-item active">پرداخت سفارش</li>
				</ol>
			</div>
		</div>
	</div>
</div>
<div class="main_content">

	<!-- START SECTION SHOP -->
	<div class="section">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<p class="alert alert-info">
						برای تکمیل سفارش فرم زیر را تکمیل کنید
					</p>
				</div>
			</div>
			<div class="row">
				<div class="col-12">
					<div class="medium_divider"></div>
					<div class="divider center_icon"><i class="linearicons-credit-card"></i></div>
					<div class="medium_divider"></div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6">
					<div class="heading_s1">
						<h4>اطلاعات ارسال</h4>
					</div>
					<form method="post">
						<div class="form-group">
							<input type="text" required class="form-control" value="@Model.UserInformation.FullName" id="fullname" placeholder="نام تحویل گیرنده *">
						</div>
						<div class="form-group">
							<input type="text" required class="form-control" value="@Model.UserInformation.CellNumber" id="cellnumber" placeholder="شماره موبایل تحویل گیرنده *">
						</div>
					 
					<div class="form-group">
						<div class="custom_select">
							<select id="billing_Province"  class="form-control">
								@foreach (var province in Model.Provinces)
								{
									<option value="@province.Id">@province.Title</option>

								}
							</select>
		 
						</div>
					</div>
						
						
					<div class="form-group">
						<div class="custom_select">
							<select id="ddlcity" class="form-control">
								<option value="0">انتخاب شهر*</option>
								
							</select>
						</div>
					</div>
						

					<div class="form-group">
							<input type="text" class="form-control" id="address" required="" placeholder="آدرس *">
						</div>
					 
				  
						<div class="form-group">
							<input class="form-control" required type="text" id="postalCode" placeholder="کد پستی">
						</div>
						<div class="form-group mb-0">
							<textarea rows="5" class="form-control" id="note" placeholder="توضیحات"></textarea>
						</div>
				 
					 
			 
					 
					
					</form>
				</div>
				<div class="col-md-6">
					<div class="order_review">
						<div class="heading_s1">
							<h4>سفارش شما</h4>
						</div>
						<div class="table-responsive order_table">
							<table class="table">
								<thead>
								<tr>
									<th>محصول</th>
									<th>جمع</th>
								</tr>
								</thead>
								<tbody>
								@foreach (var product in Model.Products)
								{
									<tr>
										<td>@product.Product.Title <span class="product-qty">تعداد: @product.Quantity</span></td>
										<td>@product.RowAmount</td>
									</tr>
								}
					 
								</tbody>
								<tfoot>
								<tr>
									<th>جمع فاکتور</th>
									<td class="product-subtotal">@Model.SubTotal</td>
								</tr>
								<tr>
									<th>تخفیف</th>
									<td>@Model.DiscountAmount</td>
								</tr>
								<tr>
									<th>مبلغ قابل پرداخت</th>
									<td class="product-subtotal">@Model.Total</td>
								</tr>
								</tfoot>
							</table>
						</div>
						
						<div class="payment_method">
							<div class="heading_s1">
								<h4>نحوه پرداخت</h4>
							</div>
							<div class="payment_option">
								<div class="custome-radio">
									<input class="form-check-input" required="" type="radio" name="payment_option" id="exampleRadios3" value="online" checked="">
									<label class="form-check-label" for="exampleRadios3">پرداخت آنلاین</label>
									<p data-method="online" class="payment-text">از طریق کلیه کارت های بانکی و رمز دوم پویا </p>
								</div>
								<div class="custome-radio">
									<input class="form-check-input" type="radio" name="payment_option" id="exampleRadios4" value="recieve">
									<label class="form-check-label" for="exampleRadios4">پرداخت در محل (فقط سفارشات تهران)</label>
									<p data-method="recieve" class="payment-text">این امکان فقط برای سفارشات شهر تهران مقدور می باشد.</p>
								</div>
								<div class="custome-radio">
									<input class="form-check-input" type="radio" name="payment_option" id="exampleRadios5" value="transfer">
									<label class="form-check-label" for="exampleRadios5">واریز به حساب</label>
									<p data-method="transfer" class="payment-text">با انتخاب این گزینه و کلیک بر روی دکمه زیر همکاران ما با شما تماس خواهند گرفت.</p>
								</div>
							</div>
						</div>
						<p class="alert alert-danger" id="error-box"></p>
						<p class="alert alert-success" id="success-checkout-box"></p>

						<button type="button" id="btnPayment" class="btn btn-fill-out btn-block" onclick="finalizeOrder();">پرداخت سفارش</button>
			 @*<button type="button" class="btn btn-fill-out btn-block" onclick="alert('در حال حاظر فقط امکان خرید تلفنی و حضوری مقدور می باشد');">پرداخت سفارش</button>*@
					</div>
				</div>
			</div>
		</div>
	</div>
	 

</div>


@section scripts{
	<script>


		$('#billing_Province').on('change',
			function () {
				var SelectedValue = $(this).val();
				if (SelectedValue !== "") {
					var procemessage = "<option value='0'> صبرکنید...</option>";
					$("#ddlcity").html(procemessage).show();
					$.ajax(
						{
							url: "/Basket/FillCities",
							data: { id: SelectedValue },
							cache: false,
							type: "POST",
							success: function (data) {
								var markup = "<option value='0'>انتخاب شهر</option>";
								for (var x = 0; x < data.length; x++) {
									markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";
								}
								$("#ddlcity").html(markup).show();
							},
							error: function (reponse) {
								alert("error : " + reponse);
							}
						});
				}
			});


	</script>
}